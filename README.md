# Здравейте приятелчета!

Football stats е система, която ще помогне при анализирането на футболните мачове. Крайният резултат, ще бъде анализиране на позициите на играчите, топката и разиграните ситуации и изготвяне на heatmap-ове и статистики спрямо тези данни.

# Sprint 1:
- Първи спринт започна на 13.09.2016 с екип (по произволен, латинско-азбучен ред): Цецо (ceco@devlabs.bg), Радо (rado@devlabs.bg), Веселин (veselin@devlabs.bg) в development и Гого (goran@devlabs.bg) в съпорт. Изключително сме доволни от проявеният интерес от останалите ни колеги, интересните дискусии и спонтанните брейнсторминг сесии, които спринта инициира. Kudos, както се казва по български.

## Процеса на работа

### Ден първи

Имахме почти изчистена идеята за продукта и трябваше да ошлайфаме добре детайлите. След кратка среща набелязахме конкретните цели, към които може да се стреми проекта:
- Heatmaps за активността на играчите
- Snapshot-и на моментни ситуации
- Статистически репорти за скорост, ускорение, сърдечен ритъм, успеваемост на удърите, пасове, ball possession, out/corner/throw-ins и др.

След кратка дискусия стигнахме до заключението, че за scope първи е трябва да си поставим постижими цели, които да дадат старт на идеята или да валидират нейната изпълнимост.

Sprint 1 scope:
Извличане на информация за позицията на играчите по игралното поле и нейната визуализация, изготвяне на proof-of-concept демо с code examples.

След известно количество брейнсторминг набелязахме потенциалните кандидат-технологии, които може да се използват за определяне на позицията на играчите.
- GPS
- Image processing / Computer vision
- IR Detection
- 3D Reconstruction
- Bluetooth/Wifi signal strength triangulation
- Ultrasonic sensors
- LAZERS!

Разпределихме задачите за research и остатъка от ден 1ви, както и част от ден 2ри мина в research/assessment на използваемостта на тези технологии за нашия проект.

### Ден втори

След research-а обобщихме екипно резултата за research-а по всяка една технология, набелязахме за тях плюсове и минуси, както и набелязахме кандидат-технологията, която искаме да използваме за проекта.
- GPS - не достатъчна прецизност на GPS-ите в достъпните потребителски устройства (4-8м грешка, 1hz сигнали), Има евентуални възможности за решения чрез по-скъпо оборудване (по-корави GPS-и, с по-големи антени), които теоретично биха минимизирали грешката от 4 до 1м, както и инсталиране на RTK станция (https://en.wikipedia.org/wiki/Real_Time_Kinematic) - теоретично с "up to centimetre-level accuracy", прекалено скъпи и енергоемки решения за масовия потребител.
- CV - TODO
- IR - TODO
- 3D - TODO
- BT - TODO
- US - TODO
- LZ - TODO

В крайна сметка избрахме да се фокусираме върху computer vision и image processing с OpenCV.

### Ден трети

Набелязахме потенциалните направления от computer vision, които трябва да разучим за да успеем да извадим data за позицията на играчите по футболното игрище. Разделихме ги на 3 основни групи:
- Player detection
- Player identification
- Player camera to field coordinates projection

Отново разделихме задачите и започнахме главно изучаване на предлаганите от библиотеката възможности за CV и запознаване с Python (езика, с който избрахме да цъкаме на OpenCV, никой от нас нямаше опит с Python, поехме този challenge).

### Ден четвърти

Разполагахме с някакъв background и working examples по OpenCV, заснехме няколко <insert links with silly videos here> sample видеа отзад в #лятнатаГрадина и започнахме да подготвяме working prototype за идеята върху тях. 
Набелязахме нещата, които можем да използваме:
- motion detection алгоритми - за да знаем къде има нещо по игрището
- text/letter recognition или object recognition за разпознаване на въпросното от по-горе "нещо" кой играч всъщност е
- Няколко метода предлагани от библиотеката за изготвяне на translation matrix за коригиране на изкривяванията на камерата и преобразуване на координатите на играчите от видео образа към виртуалното 2D игрище.

Набелязахме и доста corner cases, който _няма_ да предвиждаме в demo-то за Sprint 1: 
Multi user - след разпознаване на играчите трябва да ги следим и да "знаем" играч къде се намира. Съответно когато играч е пред/зад друг играч трябва да се разпознаят няколко отделни обекта. Един възможен начин за справяне с тази ситуация е наличие на няколко камери - взаимодействие/синхронизация между тях за разпознаване на максимален брой обекти в сцената, както и коригиране (average) на position данните от едната камера с данните от другата. Възможно е и да се разпишат алгоритми за намиране на "last known position" на играчите, която да се използва за estimate-ване на текущата позиция на играч в кадрите, където камерата не го вижда, спрямо последните карди в които го е виждала, и/или бъдещи кадри, в които ще го види. Разпознаване на топки, съдии и други обекти по полето, които не са ни важни.

### Ден пети

Последния ден от спринта. Моментът на истината. В началото на деня повечето компоненти от работещото демо (ограничено за един играч в полето #foreveralone и една снимаща го камера (без кожен диван)) бяха почти работещи. В по-реалните тестове открихме, че letter recognition-а не работи добре ако нямаме адски много samples, с които да обучим системата да намира цифри (разбирайте цифрата 9 снимана под всякакви възможни ъгли), изпробвахме object tracking предлаган от библиотеката, но там резултатите бяха неточни и още по-неточни ако има много детайли в картината. На този етап имаше нужда от повече research за други начини (или доусъвършенстване на тези) за разпознаване на играчите в игрището и във финалното демо тази функционалност не е представена. Доусъвършенствахме тук-там алгоритмите - running average на координатите и error correction за false-positive detection, поизпипахме визуално демото (да чертае позицията на играча, да не забиваме координатите на игрището и т.н.) и по план искахме да изготвим това обобщение + презентация.
